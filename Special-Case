import React, { useState, useEffect, useRef } from â€˜reactâ€™;
import { Brain, Zap, Shield, Target, Activity, AlertTriangle, TrendingUp, Database } from â€˜lucide-reactâ€™;

const NeuralWarfareGame = () => {
const [gameState, setGameState] = useState(â€˜menuâ€™); // menu, playing, analyzing
const [player, setPlayer] = useState({
name: â€˜Christopher AriAbba Morningstar Abbottâ€™,
health: 1100,
energy: 1100,
mentalStrength: 1100,
defenseLevel: 50,
attackPower: 50,
tactics: []
});

const [opponent, setOpponent] = useState({
name: â€˜Dennis M. Donohueâ€™,
health: 1100,
energy: 1100,
mentalStrength: 1100,
defenseLevel: 50,
attackPower: 50
});

const [battleLog, setBattleLog] = useState([]);
const [selectedTactic, setSelectedTactic] = useState(null);
const [aiAnalysis, setAiAnalysis] = useState(â€™â€™);
const [networkNodes, setNetworkNodes] = useState([]);
const [turn, setTurn] = useState(â€˜playerâ€™);
const [analyzing, setAnalyzing] = useState(false);

const tactics = [
{
id: â€˜cognitive_overloadâ€™,
name: â€˜Cognitive Overloadâ€™,
type: â€˜attackâ€™,
energyCost: 20,
damage: 25,
description: â€˜Overwhelm opponent with information streams with effects personal to unanamous user and then leaks to operators surrounding vectors â€™,
icon: â€˜ðŸ§ â€™
},
{
id: â€˜neural_barrierâ€™,
name: â€˜Neural Barrierâ€™,
type: â€˜defenseâ€™,
energyCost: 15,
defense: 30,
description: â€˜Erect mental defenses against attacksâ€™,
icon: â€˜ðŸ›¡ï¸â€™
},
{
id: â€˜pattern_disruptionâ€™,
name: â€˜Pattern Disruptionâ€™,
type: â€˜attackâ€™,
energyCost: 25,
damage: 30,
description: â€˜Disrupt enemy thought patterns, use sawâ€™,
icon: â€˜âš¡â€™
},
{
id: â€˜memory_fragmentationâ€™,
name: â€˜Memory Fragmentationâ€™,
type: â€˜attackâ€™,
energyCost: 30,
damage: 35,
description: â€˜Scatter opponent's memory structuresâ€™,
icon: â€˜ðŸ’¥â€™
},
{
id: â€˜meditation_shieldâ€™,
name: â€˜Meditation Shieldâ€™,
type: â€˜defenseâ€™,
energyCost: 10,
healing: 20,
description: â€˜Restore mental equilibriumâ€™,
icon: â€˜ðŸ§˜â€™
},
{
id: â€˜synaptic_strikeâ€™,
name: â€˜Synaptic Strikeâ€™,
type: â€˜attackâ€™,
energyCost: 35,
damage: 40,
description: â€˜Direct neural pathway attackâ€™,
icon: â€˜ðŸŽ¯â€™
},
{
id: â€˜network_scanâ€™,
name: â€˜Network Scanâ€™,
type: â€˜utilityâ€™,
energyCost: 10,
description: â€˜Analyze opponent's vulnerabilitiesâ€™,
icon: â€˜ðŸ”â€™
},
{
id: â€˜energy_siphonâ€™,
name: â€˜Energy Siphonâ€™,
type: â€˜attackâ€™,
energyCost: 15,
damage: 15,
drain: 20,
description: â€˜Drain opponent's mental energyâ€™,
icon: â€˜ðŸŒ€â€™
}
];

const canvasRef = useRef(null);

useEffect(() => {
if (gameState === â€˜playingâ€™) {
initializeNetwork();
}
}, [gameState]);

useEffect(() => {
if (canvasRef.current && networkNodes.length > 0) {
drawNetwork();
}
}, [networkNodes, player.health, opponent.health]);

const initializeNetwork = () => {
const nodes = [];
for (let i = 0; i < 12; i++) {
nodes.push({
id: i,
x: Math.random() * 300 + 50,
y: Math.random() * 200 + 50,
active: Math.random() > 0.5,
owner: i < 6 ? â€˜playerâ€™ : â€˜opponentâ€™
});
}
setNetworkNodes(nodes);
};

const drawNetwork = () => {
const canvas = canvasRef.current;
if (!canvas) return;

```
const ctx = canvas.getContext('2d');
ctx.clearRect(0, 0, canvas.width, canvas.height);

// Draw connections
ctx.strokeStyle = 'rgba(100, 100, 255, 0.2)';
ctx.lineWidth = 1;
for (let i = 0; i < networkNodes.length; i++) {
  for (let j = i + 1; j < networkNodes.length; j++) {
    const node1 = networkNodes[i];
    const node2 = networkNodes[j];
    const distance = Math.sqrt(
      Math.pow(node2.x - node1.x, 2) + Math.pow(node2.y - node1.y, 2)
    );
    if (distance < 150) {
      ctx.beginPath();
      ctx.moveTo(node1.x, node1.y);
      ctx.lineTo(node2.x, node2.y);
      ctx.stroke();
    }
  }
}

// Draw nodes
networkNodes.forEach(node => {
  ctx.beginPath();
  ctx.arc(node.x, node.y, 8, 0, 2 * Math.PI);
  ctx.fillStyle = node.owner === 'player' 
    ? (node.active ? '#3b82f6' : '#93c5fd')
    : (node.active ? '#ef4444' : '#fca5a5');
  ctx.fill();
  ctx.strokeStyle = node.owner === 'player' ? '#1e40af' : '#991b1b';
  ctx.lineWidth = 2;
  ctx.stroke();
});
```

};

const startGame = () => {
setGameState(â€˜playingâ€™);
setBattleLog([â€˜Neural warfare initiated. Systems online.â€™]);
setPlayer({ â€¦Christopher, health: 1100, energy: 1100, mentalStrength: 1100 });
setOpponent({ â€¦Dennis, health: 1100, energy: 1100, mentalStrength: 1100 });
};

const executeTactic = async (tactic) => {
if (player.energy < tactic.energyCost) {
addLog(â€˜Insufficient energy for this tactic!â€™, â€˜errorâ€™);
return;
}

```
setSelectedTactic(tactic);
setAnalyzing(true);

// Simulate AI analysis
setTimeout(() => {
  let analysis = '';
  let newPlayerState = { ...player };
  let newOpponentState = { ...opponent };

  newPlayerState.energy -= tactic.energyCost;

  if (tactic.type === 'attack') {
    const actualDamage = Math.floor(tactic.damage * (1 - opponent.defenseLevel / 200));
    newOpponentState.health = Math.max(0, opponent.health - actualDamage);
    newOpponentState.mentalStrength = Math.max(0, opponent.mentalStrength - 10);
    
    analysis = `Attack executed: ${tactic.name}. Dealt ${actualDamage} damage. Opponent's neural network destabilizing.`;
    addLog(`You used ${tactic.name} - ${actualDamage} damage!`, 'player');
    
    if (tactic.drain) {
      newOpponentState.energy = Math.max(0, opponent.energy - tactic.drain);
      addLog(`Drained ${tactic.drain} energy from opponent`, 'player');
    }
  } else if (tactic.type === 'defense') {
    newPlayerState.defenseLevel = Math.min(100, player.defenseLevel + tactic.defense || 0);
    if (tactic.healing) {
      newPlayerState.health = Math.min(100, player.health + tactic.healing);
      addLog(`Restored ${tactic.healing} health`, 'player');
    }
    analysis = `Defense protocol activated: ${tactic.name}. Mental barriers reinforced.`;
    addLog(`You used ${tactic.name} - Defense increased!`, 'player');
  } else if (tactic.type === 'utility') {
    analysis = `Scanning opponent's neural network... Vulnerabilities detected in sectors 3, 7, and 11. Recommend pattern disruption attacks.`;
    addLog(`Network scan complete - Intel gathered`, 'player');
  }

  setAiAnalysis(analysis);
  setPlayer(newPlayerState);
  setOpponent(newOpponentState);
  setAnalyzing(false);

  if (newOpponentState.health > 0) {
    setTimeout(() => opponentTurn(), 1500);
  } else {
    endGame('victory');
  }
}, 1000);
```

};

const opponentTurn = () => {
setTurn(â€˜opponentâ€™);
setTimeout(() => {
const availableTactics = tactics.filter(t => t.energyCost <= opponent.energy);
const tactic = availableTactics[Math.floor(Math.random() * availableTactics.length)];

```
  let newPlayerState = { ...player };
  let newOpponentState = { ...opponent };

  newOpponentState.energy -= tactic.energyCost;

  if (tactic.type === 'attack') {
    const actualDamage = Math.floor(tactic.damage * (1 - player.defenseLevel / 200));
    newPlayerState.health = Math.max(0, player.health - actualDamage);
    addLog(`Opponent used ${tactic.name} - ${actualDamage} damage!`, 'opponent');
  } else if (tactic.type === 'defense') {
    newOpponentState.defenseLevel = Math.min(100, opponent.defenseLevel + 20);
    addLog(`Opponent strengthened defenses`, 'opponent');
  }

  setPlayer(newPlayerState);
  setOpponent(newOpponentState);
  
  // Regenerate some energy each turn
  newPlayerState.energy = Math.min(100, newPlayerState.energy + 15);
  newOpponentState.energy = Math.min(100, newOpponentState.energy + 15);
  
  setPlayer(newPlayerState);
  setOpponent(newOpponentState);

  if (newPlayerState.health > 0) {
    setTurn('player');
  } else {
    endGame('defeat');
  }
}, 1500);
```

};

const addLog = (message, type = â€˜infoâ€™) => {
setBattleLog(prev => [â€¦prev, { message, type, timestamp: Date.now() }].slice(-10));
};

const endGame = (result) => {
setGameState(â€˜menuâ€™);
if (result === â€˜victoryâ€™) {
addLog(â€˜ðŸŽ‰ VICTORY! Neural dominance achieved!â€™, â€˜victoryâ€™);
} else {
addLog(â€˜ðŸ’€ DEFEAT! Neural network compromised!â€™, â€˜defeatâ€™);
}
};

return (
<div className="w-full h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white overflow-hidden">
{gameState === â€˜menuâ€™ && (
<div className="flex flex-col items-center justify-center h-full">
<div className="text-center space-y-6 p-8">
<Brain className="w-24 h-24 mx-auto text-blue-400 animate-pulse" />
<h1 className="text-5xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
Neural Warfare
</h1>
<p className="text-xl text-gray-300 max-w-md">
Strategic Mind Combat System
</p>
<p className="text-sm text-gray-400 max-w-lg">
Engage in psychological warfare using advanced mental tactics. Build your neural network, execute strategic attacks, and dominate the cognitive battlefield.
</p>
<button
onClick={startGame}
className="px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg text-lg font-semibold hover:from-blue-600 hover:to-purple-600 transform hover:scale-105 transition-all shadow-lg"
>
Initialize Neural Combat
</button>
</div>
</div>
)}

```
  {gameState === 'playing' && (
    <div className="h-full flex flex-col p-4 gap-4">
      {/* Header Stats */}
      <div className="grid grid-cols-2 gap-4">
        {/* Player Stats */}
        <div className="bg-blue-900/30 backdrop-blur-sm rounded-lg p-4 border border-blue-500/30">
          <div className="flex items-center gap-2 mb-3">
            <Shield className="w-5 h-5 text-blue-400" />
            <h3 className="font-bold">{player.name}</h3>
          </div>
          <div className="space-y-2">
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span>Health</span>
                <span>{player.health}/100</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all"
                  style={{ width: `${player.health}%` }}
                />
              </div>
            </div>
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span>Energy</span>
                <span>{player.energy}/100</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all"
                  style={{ width: `${player.energy}%` }}
                />
              </div>
            </div>
            <div className="flex justify-between text-xs">
              <span>Defense: {player.defenseLevel}</span>
              <span>Mental: {player.mentalStrength}</span>
            </div>
          </div>
        </div>

        {/* Opponent Stats */}
        <div className="bg-red-900/30 backdrop-blur-sm rounded-lg p-4 border border-red-500/30">
          <div className="flex items-center gap-2 mb-3">
            <AlertTriangle className="w-5 h-5 text-red-400" />
            <h3 className="font-bold">{opponent.name}</h3>
          </div>
          <div className="space-y-2">
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span>Health</span>
                <span>{opponent.health}/100</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-red-500 to-orange-500 h-2 rounded-full transition-all"
                  style={{ width: `${opponent.health}%` }}
                />
              </div>
            </div>
            <div>
              <div className="flex justify-between text-xs mb-1">
                <span>Energy</span>
                <span>{opponent.energy}/100</span>
              </div>
              <div className="w-full bg-gray-700 rounded-full h-2">
                <div 
                  className="bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all"
                  style={{ width: `${opponent.energy}%` }}
                />
              </div>
            </div>
            <div className="flex justify-between text-xs">
              <span>Defense: {opponent.defenseLevel}</span>
              <span>Mental: {opponent.mentalStrength}</span>
            </div>
          </div>
        </div>
      </div>

      {/* Main Battle Area */}
      <div className="grid grid-cols-3 gap-4 flex-1">
        {/* Neural Network Visualization */}
        <div className="bg-gray-900/50 backdrop-blur-sm rounded-lg p-4 border border-gray-700">
          <h3 className="font-bold mb-2 flex items-center gap-2">
            <Activity className="w-4 h-4" />
            Neural Network
          </h3>
          <canvas 
            ref={canvasRef}
            width={400}
            height={300}
            className="w-full h-full rounded"
          />
        </div>

        {/* Tactics Panel */}
        <div className="bg-gray-900/50 backdrop-blur-sm rounded-lg p-4 border border-gray-700 overflow-y-auto">
          <h3 className="font-bold mb-3 flex items-center gap-2">
            <Target className="w-4 h-4" />
            Combat Tactics {turn === 'player' ? '(Your Turn)' : '(Enemy Turn)'}
          </h3>
          <div className="space-y-2">
            {tactics.map(tactic => (
              <button
                key={tactic.id}
                onClick={() => turn === 'player' && executeTactic(tactic)}
                disabled={turn !== 'player' || player.energy < tactic.energyCost}
                className={`w-full text-left p-3 rounded-lg transition-all ${
                  player.energy < tactic.energyCost || turn !== 'player'
                    ? 'bg-gray-800/30 text-gray-500 cursor-not-allowed'
                    : 'bg-gradient-to-r from-blue-600/30 to-purple-600/30 hover:from-blue-600/50 hover:to-purple-600/50 border border-blue-500/30'
                }`}
              >
                <div className="flex items-center justify-between mb-1">
                  <span className="font-semibold text-sm flex items-center gap-2">
                    <span className="text-xl">{tactic.icon}</span>
                    {tactic.name}
                  </span>
                  <span className="text-xs text-yellow-400">{tactic.energyCost} âš¡</span>
                </div>
                <p className="text-xs text-gray-400">{tactic.description}</p>
              </button>
            ))}
          </div>
        </div>

        {/* Battle Log & AI Analysis */}
        <div className="space-y-4">
          {/* AI Analysis */}
          <div className="bg-purple-900/30 backdrop-blur-sm rounded-lg p-4 border border-purple-500/30">
            <h3 className="font-bold mb-2 flex items-center gap-2">
              <Brain className="w-4 h-4" />
              AI Analysis
            </h3>
            <div className="text-sm text-gray-300 min-h-20">
              {analyzing ? (
                <div className="flex items-center gap-2">
                  <Activity className="w-4 h-4 animate-spin" />
                  Analyzing neural patterns...
                </div>
              ) : (
                aiAnalysis || 'Awaiting tactical input...'
              )}
            </div>
          </div>

          {/* Battle Log */}
          <div className="bg-gray-900/50 backdrop-blur-sm rounded-lg p-4 border border-gray-700 flex-1 overflow-y-auto">
            <h3 className="font-bold mb-2 flex items-center gap-2">
              <Database className="w-4 h-4" />
              Battle Log
            </h3>
            <div className="space-y-1 text-xs">
              {battleLog.map((log, i) => (
                <div 
                  key={i}
                  className={`p-2 rounded ${
                    log.type === 'player' ? 'bg-blue-900/30 text-blue-300' :
                    log.type === 'opponent' ? 'bg-red-900/30 text-red-300' :
                    log.type === 'victory' ? 'bg-green-900/30 text-green-300' :
                    log.type === 'defeat' ? 'bg-red-900/50 text-red-200' :
                    'bg-gray-800/30 text-gray-400'
                  }`}
                >
                  {log.message}
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  )}
</div>
```

);
};

export default NeuralWarfareGame;
